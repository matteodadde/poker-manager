<!-- app/templates/components/messages.html -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <!-- Mappa le categorie a classi e icone BS5 -->
      {% set alert_class = 'alert-info' %}
      {% set icon_class = 'bi-info-circle-fill' %}
      
      {% if category == 'success' %}
        {% set alert_class = 'alert-success' %}
        {% set icon_class = 'bi-check-circle-fill' %}
      {% elif category == 'danger' %}
        {% set alert_class = 'alert-danger' %}
        {% set icon_class = 'bi-exclamation-triangle-fill' %}
      {% elif category == 'warning' %}
        {% set alert_class = 'alert-warning' %}
        {% set icon_class = 'bi-exclamation-triangle-fill' %}
      {% endif %}

      <div class="alert {{ alert_class }} alert-dismissible fade show d-flex align-items-center" role="alert">
        <!-- Icona -->
        <i class="bi {{ icon_class }} me-2" aria-hidden="true"></i>
        <!-- Messaggio -->
        <div>
          {{ message | safe }}
        </div>
        <!-- Bottone di chiusura (standard BS5) -->
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Chiudi"></button>
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}
